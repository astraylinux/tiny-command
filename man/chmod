mod 
1.作用 
chmod命令是非常重要的，用于改变文件或目录的访问权限，用户可以用它控制文件或目录的访问权限，使用权限是超级用户。 
2.格式 
chmod命令有两种用法。一种是包含字母和操作符表达式的字符设定法（相对权限设定）；另一种是包含数字的数字设定法（绝对权限设定）。 
（1）字符设定法 
chmod [who] [+ 　 - 　 =] [mode] 文件名 
◆操作对象who可以是下述字母中的任一个或它们的组合 
u：表示用户，即文件或目录的所有者。 
g：表示同组用户，即与文件属主有相同组ID的所有用户。 
o：表示其它用户。 
a：表示所有用户，它是系统默认值。 
◆操作符号 
+：添加某个权限。 
-：取消某个权限。 
=：赋予给定权限，并取消其它所有权限（如果有的话）。 
◆设置mode的权限可用下述字母的任意组合 
r：可读。 
w：可写。 
x：可执行。 
X：只有目标文件对某些用户是可执行的或该目标文件是目录时才追加x属性。 
s：文件执行时把进程的属主或组ID置为该文件的文件属主。方式“u＋s”设置文件的用户ID位，“g＋s”设置组ID位。 
t：保存程序的文本到交换设备上。 
u：与文件属主拥有一样的权限。 
g：与和文件属主同组的用户拥有一样的权限。 
o：与其它用户拥有一样的权限。 
文件名：以空格分开的要改变权限的文件列表，支持通配符。 
一个命令行中可以给出多个权限方式，其间用逗号隔开。 
（2） 数字设定法 
数字设定法的一般形式为： 
chmod [mode] 文件名 


数字属性的格式应为3个0到7的八进制数，其顺序是(u)(g)(o)文件名，以空格分开的要改变权限的文件列表，支持通配符。 
数字表示的权限的含义如下：0001为所有者的执行权限；0002为所有者的写权限；0004为所有者的读权限；0010为组的执行权限；0020为组的写权限；0040为组的读权限；0100为其他人的执行权限；0200为其他人的写权限；0400为其他人的读权限；1000为粘贴位置位；2000表示假如这个文件是可执行文件，则为组ID为位置位，否则其中文件锁定位置位；4000表示假如这个文件是可执行文件，则为用户ID为位置位。 
3.实例 
如果一个系统管理员写了一个表格(tem)让所有用户填写，那么必须授权用户对这个文件有读写权限，可以使用命令： 
＃chmod 666 tem 


上面代码中，这个666数字是如何计算出来的呢？0002为所有者的写权限，0004为所有者的读权限，0020为组的写权限，0040为组的读权限， 0200为其他人的写权限，0400为其他人的读权限，这6个数字相加就是666（注以上数字都是八进制数），结果见图1所示。 


图1 用chmod数字方法设定文件权限 
从图1可以看出，tem文件的权限是-rw-rw-rw-，即用户对这个文件有读写权限。 
如果用字符权限设定使用下面命令： 
＃chmod a =wx tem 


chown 
1.作用 
更改一个或多个文件或目录的属主和属组。使用权限是超级用户。 
2.格式 
chown [选项] 用户或组 文件 


3.主要参数 
--dereference：受影响的是符号链接所指示的对象，而非符号链接本身。 
-h, --no-dereference：会影响符号链接本身，而非符号链接所指示的目的地(当系统支持更改符号链接的所有者，此选项才有效)。 
--from=目前所有者:目前组只当每个文件的所有者和组符合选项所指定的，才会更改所有者和组。其中一个可以省略，这已省略的属性就不需要符合原有的属性。 
-f, --silent, --quiet：去除大部分的错误信息。 
-R, --recursive：递归处理所有的文件及子目录。 
-v, --verbose：处理任何文件都会显示信息。 


4.说明 
chown将指定文件的拥有者改为指定的用户或组，用户可以是用户名或用户ID；组可以是组名或组ID；文件是以空格分开的要改变权限的文件列表，支持通配符。系统管理员经常使用chown命令，在将文件拷贝到另一个用户的目录下以后，让用户拥有使用该文件的权限。 
5.应用实例 
1.把文件shiyan.c的所有者改为wan 
$ chown wan shiyan.c 


2.把目录/hi及其下的所有文件和子目录的属主改成wan，属组改成users。 
$ chown - R wan.users /hi 

chattr 
1.作用 
修改ext2和ext3文件系统属性(attribute)，使用权限超级用户。 
2.格式 
chattr [-RV] [-+=AacDdijsSu] [-v version] 文件或目录 


3.主要参数 
－R：递归处理所有的文件及子目录。 
－V：详细显示修改内容，并打印输出。 
－：失效属性。 
＋：激活属性。 
= ：指定属性。 
A：Atime，告诉系统不要修改对这个文件的最后访问时间。 
S：Sync，一旦应用程序对这个文件执行了写操作，使系统立刻把修改的结果写到磁盘。 
a：Append Only，系统只允许在这个文件之后追加数据，不允许任何进程覆盖或截断这个文件。如果目录具有这个属性，系统将只允许在这个目录下建立和修改文件，而不允许删除任何文件。 
i：Immutable，系统不允许对这个文件进行任何的修改。如果目录具有这个属性，那么任何的进程只能修改目录之下的文件，不允许建立和删除文件。 
D：检查压缩文件中的错误。 
d：No dump，在进行文件系统备份时，dump程序将忽略这个文件。 
C：Compress，系统以透明的方式压缩这个文件。从这个文件读取时，返回的是解压之后的数据；而向这个文件中写入数据时，数据首先被压缩之后才写入磁盘。 
s：Secure Delete，让系统在删除这个文件时，使用0填充文件所在的区域。 
u：Undelete，当一个应用程序请求删除这个文件，系统会保留其数据块以便以后能够恢复删除这个文件。 


4.说明 
chattr命令的作用很大，其中一些功能是由Linux内核版本来支持的，如果Linux内核版本低于2.2，那么许多功能不能实现。同样－D检查压缩文件中的错误的功能，需要2.5.19以上内核才能支持。另外，通过chattr命令修改属性能够提高系统的安全性，但是它并不适合所有的目录。 chattr命令不能保护/、/dev、/tmp、/var目录。 
5.应用实例 
1.恢复/root目录,即子目录的所有文件 
# chattr -R +u/root 


2.用chattr命令防止系统中某个关键文件被修改 
在Linux下，有些配置文件(passwd ,fatab)是不允许任何人修改的，为了防止被误删除或修改，可以设定该文件的“不可修改位(immutable)”，命令如下： 
# chattr +i /etc/fstab 
