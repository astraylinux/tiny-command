tar 

1. 作用 

tar命令是Unix/Linux系统中备份文件的可靠方法，几乎可以工作于任何环境中，它的使用权限是所有用户。 

2. 格式 

tar [主选项+辅选项] 文件或目录 

3.主要参数 
使用该命令时，主选项是必须要有的，它告诉tar要做什么事情，辅选项是辅助使用的，可以选用。 

主选项： 

-c 创建新的档案文件。如果用户想备份一个目录或是一些文件，就要选择这个选项。 

-r 把要存档的文件追加到档案文件的未尾。例如用户已经做好备份文件，又发现还有一个目录或是一些文件忘记备份了，这时可以使用该选项，将忘记的目录或文件追加到备份文件中。 

-t 列出档案文件的内容，查看已经备份了哪些文件。 

-u 更新文件。就是说，用新增的文件取代原备份文件，如果在备份文件中找不到要更新的文件，则把它追加到备份文件的最后。 

-x 从档案文件中释放文件。 

辅助选项： 

-b 该选项是为磁带机设定的，其后跟一数字，用来说明区块的大小，系统预设值为20（20×512 bytes）。 

-f 使用档案文件或设备，这个选项通常是必选的。 

-k 保存已经存在的文件。例如把某个文件还原，在还原的过程中遇到相同的文件，不会进行覆盖。 

-m 在还原文件时，把所有文件的修改时间设定为现在。 

-M 创建多卷的档案文件，以便在几个磁盘中存放。 

-v 详细报告tar处理的文件信息。如无此选项，tar不报告文件信息。 

-w 每一步都要求确认。 

-z 用gzip来压缩/解压缩文件，加上该选项后可以将档案文件进行压缩，但还原时也一定要使用该选项进行解压缩。 

3. 应用说明 

tar是Tape Archive（磁带归档）的缩写，最初设计用于将文件打包到磁带上。如果下载过Linux的源代码，或许已经碰到过tar文件。tar是一个基于文件的命令，它本质上是连续地、首尾相连地堆放文件。使用tar可以打包整个目录树，这使得它特别适合用于备份。归档文件可以全部还原，或者从中展开单独的文件和目录。备份可以保存到基于文件的设备或磁带设备上。文件可以在还原时重定向，以便将它们重新放到一个与最初保存它们的目录（或系统）不同的目录（或系统）。tar与文件系统无关，可以使用在ext2、ext3、JFS、Reiser和其它文件系统上。它支持各种备份介质，包括软盘、光盘写入器、可重写的光盘、JazZip、磁带、高端磁带等。Linux中以.tar结尾的文件都是用tar创建的。它的使用超出了单纯的备份，可用来把许多不同文件放到一起组成一个易于分开的文件。如果使用Linux源代码安装程序，一定使用过tar文件。这是一个基于文件的命令，它本质上是连续地、首尾相连地堆放文件。 tar官方网址是[www.gnu]. org/software/tar/tar.html。 

请注意，不要忘了Linux是区分大小写的。例如，tar命令应该总是以小写的形式执行。命令行开关可以是大写、小写或大小写的混合。例如，-t和-T执行不同的功能。文件或目录名称可以混合使用大小写，而且就像命令和命令行开关一样是区分大小写的。 

4.应用实例 
tar是一个命令行的工具，没有图形界面。使用Konsole打开一个终端窗口，接下来是一个简单的备份命令（在/temp目录中创建一个back.tar的文件，/usr目录中所有内容都包含在其中。）： 

$tar cvf - /usr > /temp/back.tar 

另外，tar命令支持前面第三讲中讲过的crontab命令，可以用crontab工具设置成基于时间的有规律地运行。例如，每晚6点把/usr目录备份到hda—第一个IDE接口的主驱动器 (总是位于第一个硬盘)中，只要将下面语句添加到root的crontab中即可： 
$00 06 * * * tar cvf /dev/hda1/usrfiles.tar - /usr 

一般情况下，以下这些目录是需要备份的： 

◆ /etc 包含所有核心配置文件，其中包括网络配置、系统名称、防火墙规则、用户、组，以及其它全局系统项。 

◆ /var 包含系统守护进程（服务）所使用的信息，包括DNS配置、DHCP租期、邮件缓冲文件、HTTP服务器文件、dB2实例配置等。 

◆ /home 包含所有默认用户的主目录，包括个人设置、已下载的文件和用户不希望失去的其它信息。 

◆ /root 根（root）用户的主目录。 

◆ /opt 是安装许多非系统文件的地方。IBM软件就安装在这里。OpenOffice、JDK和其它软件在默认情况下也安装在这里。 

有些目录是可以不备份的： 

◆ /proc 应该永远不要备份这个目录。它不是一个真实的文件系统，而是运行内核和环境的虚拟化视图，包括诸如/proc/kcore这样的文件，这个文件是整个运行内存的虚拟视图。备份这些文件只是在浪费资源。 

◆ /dev 包含硬件设备的文件表示。如果计划还原到一个空白的系统，就可以备份/dev。然而，如果计划还原到一个已安装的Linux 系统，那么备份/dev是没有必要的。 
